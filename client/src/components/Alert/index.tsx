import './index.scss';
import React, { useState } from 'react';

type AlertProps = {
    children?: React.ReactNode;
    type: string;
    message?: string;
};

export default function Alert({
    children,
    type,
    message
}: AlertProps): React.ReactNode {
    const [isShow, setIsShow] = useState(true);
    const renderElAlert = function () {
        if (typeof children === 'function') {
            return React.cloneElement(children);
        } else {
            return children;
        }
    };

    const handleClose = (e) => {
        e.preventDefault();
        setIsShow(false);
    };

    return (
        <div
            className={`alert animate__animated animate__fadeInDown ${
                isShow ? '' : 'hide'
            } ${type}`}
        >
            <span className="closebtn" onClick={handleClose}>
                <svg
                    width="32"
                    height="32"
                    viewBox="0 0 32 32"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <path
                        d="M21.7929 11.9477C22.0237 11.7169 22.1538 11.4033 22.1538 11.0769C22.1538 10.7505 22.0242 10.4375 21.7934 10.2066L21.7827 10.1961C21.5529 9.97218 21.244 9.84615 20.9231 9.84615C20.5967 9.84615 20.2836 9.97582 20.0528 10.2066L16 14.2594L11.9472 10.2066C11.7164 9.97582 11.4033 9.84615 11.0769 9.84615C10.7505 9.84615 10.4375 9.97582 10.2066 10.2066C9.97582 10.4375 9.84615 10.7505 9.84615 11.0769C9.84615 11.4033 9.97582 11.7164 10.2066 11.9472L14.2594 16L10.2071 20.0523C9.97629 20.2831 9.84615 20.5967 9.84615 20.9231L9.84618 20.9305C9.84628 20.9477 9.84675 20.965 9.84758 20.9822C9.86227 21.2878 9.99028 21.577 10.2066 21.7934C10.4375 22.0242 10.7505 22.1538 11.0769 22.1538C11.4033 22.1538 11.7164 22.0242 11.9472 21.7934L16 17.7406L20.0528 21.7934C20.2836 22.0242 20.5967 22.1538 20.9231 22.1538C21.2495 22.1538 21.5625 22.0242 21.7934 21.7934C22.0242 21.5625 22.1538 21.2495 22.1538 20.9231C22.1538 20.5967 22.0242 20.2836 21.7934 20.0528L17.7406 16L21.7929 11.9477Z"
                        fill="white"
                    />
                    <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M16 0C16 0 19.2544 0 22.2283 1.25786C22.2283 1.25786 25.0998 2.47242 27.3137 4.68629C27.3137 4.68629 29.5276 6.90016 30.7421 9.7717C30.7421 9.7717 32 12.7456 32 16C32 16 32 19.2544 30.7421 22.2283C30.7421 22.2283 29.5276 25.0998 27.3137 27.3137C27.3137 27.3137 25.0998 29.5276 22.2283 30.7421C22.2283 30.7421 19.2544 32 16 32C16 32 12.7456 32 9.7717 30.7421C9.7717 30.7421 6.90016 29.5276 4.68629 27.3137C4.68629 27.3137 2.47242 25.0998 1.25787 22.2283C1.25787 22.2283 0 19.2544 0 16C0 16 0 12.7456 1.25787 9.7717C1.25787 9.7717 2.47243 6.90016 4.68629 4.68629C4.68629 4.68629 6.90016 2.47242 9.7717 1.25786C9.7717 1.25786 12.7456 0 16 0ZM16 2.46154C16 2.46154 13.2448 2.46154 10.7306 3.52495C10.7306 3.52495 8.30124 4.55248 6.42686 6.42686C6.42686 6.42686 4.55249 8.30124 3.52495 10.7306C3.52495 10.7306 2.46154 13.2448 2.46154 16C2.46154 16 2.46154 18.7552 3.52495 21.2694C3.52495 21.2694 4.55248 23.6988 6.42686 25.5731C6.42686 25.5731 8.30124 27.4475 10.7306 28.475C10.7306 28.475 13.2448 29.5385 16 29.5385C16 29.5385 18.7552 29.5385 21.2694 28.475C21.2694 28.475 23.6988 27.4475 25.5731 25.5731C25.5731 25.5731 27.4475 23.6988 28.475 21.2694C28.475 21.2694 29.5385 18.7552 29.5385 16C29.5385 16 29.5385 13.2448 28.475 10.7306C28.475 10.7306 27.4475 8.30124 25.5731 6.42686C25.5731 6.42686 23.6988 4.55248 21.2694 3.52495C21.2694 3.52495 18.7552 2.46154 16 2.46154Z"
                        fill="white"
                    />
                </svg>
            </span>
            {children ? (
                renderElAlert()
            ) : (
                <span className="message">{message}</span>
            )}
        </div>
    );
}
